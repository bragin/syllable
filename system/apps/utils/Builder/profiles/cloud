; Syllable Linux core system

; Root tree structure to build the distribution in

tree
;	Virtual file system mount points

	dev
;	Nodes:
;	dev/console
;	dev/null

	proc
	sys

;	Boot directory structure

	boot
	boot/grub

;	Main directory structure

	etc
;	FHS:
;	etc/grub
	etc/s3conf

	users home.png

	system

	system/config

	system/development
	system/development/headers
	system/development/resources

	system/programs
	system/libraries

	system/resources
	system/resources/catalogs
	system/resources/catalogs/bg
	system/resources/catalogs/da
	system/resources/catalogs/de
	system/resources/catalogs/el
	system/resources/catalogs/en-gb
	system/resources/catalogs/es
	system/resources/catalogs/fr
	system/resources/catalogs/fy
	system/resources/catalogs/hu
	system/resources/catalogs/nl
	system/resources/catalogs/pl
	system/resources/catalogs/pt-br
	system/resources/catalogs/ro
	system/resources/catalogs/ru
	system/resources/catalogs/sv
	system/resources/catalogs/zh-cn

	system/index
	system/index/settings
	system/index/programs
	system/index/system-programs
	system/index/framework
	system/index/data
	system/index/tasks
	system/index/tasks/setup
	system/index/tasks/start
	system/index/manuals

	var
	var/log
;	For inetd and such:
	var/run

	usr

	usr/index
	usr/index/settings
	usr/index/programs
	usr/index/bin
	usr/index/applications
	usr/index/system-programs
	usr/index/sbin
	usr/index/framework
	usr/index/lib
	usr/index/include
	usr/index/data
	usr/index/tasks
	usr/index/tasks/setup
	usr/index/tasks/start
	usr/index/manuals

;	For env:
	usr/bin
;	usr/etc
;	For NCurses:
	usr/include
;	For GhostScript:
	usr/include/sys
;	usr/info
	usr/lib
;	usr/man
;	For chroot:
	usr/sbin
;	(For terminfo:)
	usr/share
;	For manually compiled software:
	usr/local
;	For Perl:
	usr/local/bin
	usr/local/etc
	usr/local/include
	usr/local/info
	usr/local/lib
	usr/local/libexec
	usr/local/man
	usr/local/sbin
	usr/local/share

	applications				applications.png
	applications/preferences	settings.png
	documentation
;	documentation/images
	documentation/manuals

;	LFS extras

;	For SysVInit and others:
	bin
	etc/default
;	etc/opt
	etc/profile.d
	etc/sysconfig
	etc/sysconfig/network-devices
	etc/sysconfig/network-devices/ifconfig.eth0
;	mnt
;	opt
	media
	media/data
;	media/test
;	For SysVInit and others:
	sbin
;	srv
	var/lock
;	Server:
	var/state
	var/state/dhcp
	var/mail
;	For DHCP:
;	var/db
	var/spool
;	var/opt
	var/cache
;	var/lib
;	var/lib/misc
;	var/lib/locate
;	var/local
	lib
	lib/modules
	lib/firmware
	lib/udev
;	For UDevices <= 142:
	lib/udev/rules.d
	lib/udev/devices
	lib/udev/devices/pts
	lib/udev/devices/shm

prepare
	sudo mknod -m 600 dev/console c 5 1 &&
	sudo mknod -m 666 dev/null c 1 3 &&

;	mount --bind /dev dev &&

;	mount -t devpts	devpts	dev/pts &&
;	mount -t tmpfs	shm		dev/shm &&
;	mount -t proc	proc	proc &&
;	mount -t sysfs	sysfs	sys &&

;	install -d -m 0750 system &&
	install -d -m 1777 tmp var/tmp &&

	touch			var/run/utmp var/log/{btmp,lastlog,wtmp} &&
	sudo chgrp utmp	var/run/utmp var/log/lastlog &&
	chmod 664		var/run/utmp var/log/lastlog &&

	ln -s usr/ resources &&

;	For OpenSSL and others:
	ln -s /resources/index/programs/perl	usr/bin/ &&
;	For OpenSSL?
;	ln -s /resources/index/programs/perl	usr/local/bin/ &&
;	From BinaryUtilities, for building OpenSSL:
	ln -s /resources/index/programs/ranlib	usr/bin/ &&

;	touch etc/mtab

;	install -d				lib/{firmware,udev/devices/{pts,shm}} &&
	sudo mknod -m0666		lib/udev/devices/null c 1 3 &&
;	? For UDevices 145:
	sudo mknod -m0600		lib/udev/devices/kmesg c 1 11 &&
	ln -s /proc/self/fd		lib/udev/devices/fd &&
	ln -s /proc/self/fd/0	lib/udev/devices/stdin &&
	ln -s /proc/self/fd/1	lib/udev/devices/stdout &&
	ln -s /proc/self/fd/2	lib/udev/devices/stderr &&
	ln -s /proc/kcore		lib/udev/devices/core &&

;	For sshd:
	install -m700 -d			var/lib/sshd &&
	sudo chown system:system	var/lib/sshd &&

;	For LFS bootscripts:
	ln -s /system/index/system-programs/cupsd		usr/sbin/ &&
	ln -s /resources/index/system-programs/named	usr/sbin/ &&
;	ln -s /system/index/system-programs/sshd		usr/sbin/ &&
	ln -s /resources/index/programs/apachectl		usr/sbin/ &&
	ln -s /resources/index/programs/httpd			usr/sbin/ &&
	ln -s /resources/index/system-programs/vsftpd	usr/sbin/ &&
	ln -s /resources/index/programs/rsync			usr/bin/ &&
	ln -s /resources/index/system-programs/nmbd		usr/sbin/ &&
	ln -s /resources/index/system-programs/smbd		usr/sbin/ &&
	ln -s /resources/index/system-programs/winbindd	usr/sbin/ &&

;	For Python:
	ln -s /resources/index/programs/python			usr/bin/

resources
	boot/grub/										menu.lst
	etc/											linux/ld.so.conf
	etc/											linux/inittab
	etc/sysconfig/									linux/clock
	etc/											linux/fstab
	etc/											linux/syslog.conf
	etc/sysconfig/									linux/console
	etc/											linux/passwd
	etc/											linux/group
	etc/											linux/inputrc
	etc/											linux/profile
	etc/											linux/hosts
	etc/											configuration/resolv.conf
	etc/sysconfig/									linux/network
	etc/sysconfig/network-devices/ifconfig.eth0/	linux/ipv4
	etc/											linux/dhclient.conf
	etc/s3conf/										configuration/s3config.yml
;	Server:
	etc/											linux/dhcpd.conf
	var/state/dhcp/									linux/dhcpd.leases
	etc/											configuration/vsftpd.conf
	etc/											configuration/rsyncd.conf
	system/config/									net.cfg
	users/											binaries/home-directories

	etc/profile.d/									linux/glib2-locale.sh

modules
;	Syllable Linux core system

	documentation--current
	other/config/default
;	Overwrites profile:
	other/config/etc
	other/init
;	sys/include

	system linux/Linux-2.6.27.44-headers
;	For bootstrapping from a depmod with a different kernel modules location:
;	bootstrap linux/module-init-tools--bootstrap
	system linux/Linux-2.6.27.44-system

;	Kernel modules

;	Obsolete with QEmu >= 0.12:
	system linux/KernelQEmulator-1.4.0pre1

	system libs/glibc-2.7-system
	system libs/zlib-1.2.3

	linux/IPTables-1.4.6

	system linux/LFS-BootScripts-6.5
	linux/BLFS-BootScripts-2009.3.2

	libraries libraries/GNU-CompilerCollection-4.1.2-system
;	For bootstrapping:
;	system apps/gnu/GNU-CompilerCollection-4.1.2

	system libs/NCurses-5.7
	system libs/ReadLine-6.0

;	For rescopy:
;	apps/gnu/BinaryUtilities-2.19.1-objcopy

;	GrUB can use Curses:
	sys/boot/grub-0.97

	system apps/gnu/CoreUtilities-6.7
	system apps/gnu/BASh-4.0
;	For init scripts:
	system apps/gnu/GRep-2.5.4
	apps/gnu/SEd-4.2.1
	system apps/other/UnZip-6.0

	apps/gnu/bzip2-1.0.5
	system REBOL/Boron-0.1.0
	system REBOL/ORCA--current

	system linux/sysvinit-2.86
	system linux/UDevices-142
	system linux/UDevices-config--current
	stage libs/zlib-1.2.3-static
	system linux/module-init-tools-3.2.2
;	Uses headers from /usr/include/!
;	system linux/util-linux-2.12r
	system linux/UtilLinuxNG-2.16.2
	system linux/E2FSPrograms-1.41.9
	system linux/sysklogd-1.4.1
	system linux/shadow-4.0.18.1
	libraries libraries/db-4.6.21-libraries
	system linux/iproute2-2.6.25
;	linux/kbd-1.12
	linux/reiserfsprogs-3.6.19

;	Used by boot scripts, but not essential:
	apps/gnu/FindUtils-4.4.2

	apps/utils/man2html
	system apps/utils/Packager


;	Syllable Linux base distribution, in addition to core system

	other/data/MIME-Support--current

	system linux/procps-3.2.7
	system apps/other/SUDo-1.7.2p2
	apps/other/MkTemp-1.6

;	Needs ranlib symlink in /usr/bin/!
	system libraries/OpenSSL-0.9.8k-system
	other/data/CA-Bundle--current

	system apps/other/cURL-7.18.2
	system apps/other/OpenSSH-5.2p1
;	May be considered essential:
	apps/other/dhcp-3.0.5
	apps/other/msntp-1.6

	apps/gnu/gzip-1.3.12
	apps/gnu/INetUtils-1.6
	apps/gnu/Less-429
	apps/gnu/TAr-1.22
	apps/other/Zip-3.0
	apps/other/7-Zip-9.04
;	For grub-install:
	apps/gnu/diffutils-2.8.1
	apps/other/NetCat-1.10
	apps/other/Transmission-1.72
	apps/other/CDRTools-2.01.01a61

	apps/utils/Man

	system libs/sdl-1.2.13
;	sdl-config needs to be in the path:
	bootstrap libs/SDL--bootstrap

	system libs/sdl-net-1.2.7
;	system libs/SDL-Image-1.2.8


;	Binaries

	REBOL/REBOL-Core-2-current


;	REBOL stacks
	REBOL/tiny--current
	REBOL/REBOL-Services--current
	REBOL/UniServe--current
	REBOL/Cheyenne--current
	REBOL/Cheyenne--QuarterMaster-current
	REBOL/captcha--current
	REBOL/rebol-mysql-1.2.0


;	Amazon tools
	apps/other/Ruby-1.8.7p248
	apps/other/s3sync--current


;	Extra goodies

	apps/other/S-Lang-2.2.2
	apps/other/glib-2.18.4
	apps/gnu/MidnightCommander-4.7.0.2

;	apps/other/rsync-2.6.9
	apps/other/Links-2.3pre1
	apps/other/QEmulator-0.11.1

;	Extra package managers

	apps/gnu/gawk-3.1.6
	apps/gnu/wget-1.9.1
	apps/gnu/patch-2.5.4
;	apps/other/file-
	apps/gnu/gnupg-1.4.9
;	Must already be installed to bootstrap PythonGObject:
	apps/other/Python-2.6.4
;	apps/other/PythonGObject-2.20.0
	apps/other/Gobo-Scripts-2.9.11
	apps/gnu/gettext-0.17
;	For HAL and others:
	apps/other/expat-2.0.0

;	apps/other/LibFetch-2.26
;	apps/other/LibArchive-
;	apps/other/Pacman-3.3.3
